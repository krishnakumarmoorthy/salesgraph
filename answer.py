import pandas as pd
import numpy as np
import datetime
#import matplotlib
#matplotlib.use('Agg')
import matplotlib.pyplot as plt
plt.style.use('seaborn')
a = pd.read_csv("sales.csv",usecols = ['year','month','sales'])
b = pd.DataFrame(a)
d = {"January":'01',"February":"02","March":"03","April":'04',"May":'05',"June":'06',"July":'07','August':'08',"September":'09',"October":'10',"November":'11',"December":'12'}
a.month.replace(d,inplace=True)
a['Date'] = pd.to_datetime(a[['year','month']].assign(Day = 1))
a  = a[['Date','sales']]
maximum = max(a.sales)
c = b.sales.tolist()
max_sales = str(b.loc[c.index(maximum)].year)
fil = open("output.txt",'w')
fil.write(max_sales)
fil.close()
x = a.Date
y = a.sales
fig , ((axis1,axis2),(axis3,axis4),(axis5,axis6),(axis7,axis8),(axis9,axis10),(axis11,axis12)) = plt.subplots(nrows=6,ncols=2,figsize = (17,15))
axis1.plot(x,y)
axis1.set_xlim([datetime.datetime(1949,1,1),datetime.datetime(1949,12,31)])
axis1.set_title("1949")
axis1.set_xlabel('month')
axis1.set_ylabel('sales')
axis2.plot(x,y)
axis2.set_xlim([datetime.date(1950,1,1),datetime.date(1950,12,31)])
axis2.set_title("1950")
axis2.set_xlabel('month')
axis2.set_ylabel('sales')
axis3.plot(x,y)
axis3.set_xlim([datetime.date(1951,1,1),datetime.date(1951,12,31)])
axis3.set_title("1951")
axis3.set_xlabel('month')
axis3.set_ylabel('sales')
axis4.plot(x,y)
axis4.set_xlim([datetime.date(1952,1,1),datetime.date(1952,12,31)])
axis4.set_title("1952")
axis4.set_xlabel('month')
axis4.set_ylabel('sales')
axis5.plot(x,y)
axis5.set_xlim([datetime.date(1953,1,1),datetime.date(1953,12,31)])
axis5.set_title("1953")
axis5.set_xlabel('month')
axis5.set_ylabel('sales')
axis6.plot(x,y)
axis6.set_xlim([datetime.date(1954,1,1),datetime.date(1954,12,31)])
axis6.set_title("1954")
axis6.set_xlabel('month')
axis6.set_ylabel('sales')
axis7.plot(x,y)
axis7.set_xlim([datetime.date(1955,1,1),datetime.date(1955,12,31)])
axis7.set_title("1955")
axis7.set_xlabel('month')
axis7.set_ylabel('sales')
axis8.plot(x,y)
axis8.set_xlim([datetime.date(1956,1,1),datetime.date(1956,12,31)])
axis8.set_title("1956")
axis8.set_xlabel('month')
axis8.set_ylabel('sales')
axis9.plot(x,y)
axis9.set_xlim([datetime.date(1957,1,1),datetime.date(1957,12,31)])
axis9.set_title("1957")
axis9.set_xlabel('month')
axis9.set_ylabel('sales')
axis10.plot(x,y)
axis10.set_xlim([datetime.date(1958,1,1),datetime.date(1958,12,31)])
axis10.set_title("1958")
axis10.set_xlabel('month')
axis10.set_ylabel('sales')
axis11.plot(x,y)
axis11.set_xlim([datetime.date(1959,1,1),datetime.date(1959,12,31)])
axis11.set_title("1959")
axis11.set_xlabel('month')
axis11.set_ylabel('sales')
axis12.plot(x,y)
axis12.set_xlim([datetime.date(1960,1,1),datetime.date(1960,12,31)])
axis12.set_title("1960")
axis12.set_xlabel('month')
axis12.set_ylabel('sales')
fig.autofmt_xdate()
plt.show()
plt.savefig("sales.png")
